diff --git a/backend/__tests__/integration.test.js b/backend/__tests__/integration.test.js
index 7015bbc..2442476 100644
--- a/backend/__tests__/integration.test.js
+++ b/backend/__tests__/integration.test.js
@@ -152,11 +152,13 @@ describe('Authentication', () => {
   });
 
   it('rejects unauthenticated requests to protected routes', async () => {
+    if (!TEST_DB_URL) return;
     const res = await request.get('/api/v1/invoices');
     expect(res.status).toBe(401);
   });
 
   it('rejects expired/invalid tokens', async () => {
+    if (!TEST_DB_URL) return;
     const res = await request
       .get('/api/v1/invoices')
       .set('Authorization', 'Bearer this.is.not.a.real.token');
diff --git a/backend/package.json b/backend/package.json
index 72f1a83..5191fcb 100644
--- a/backend/package.json
+++ b/backend/package.json
@@ -13,7 +13,8 @@
     "db:seed": "node prisma/seed.js",
     "db:reset": "prisma db push --force-reset && npm run db:seed",
     "test:integration": "NODE_ENV=test node --experimental-vm-modules node_modules/jest/bin/jest.js --testPathPattern=integration --runInBand --forceExit",
-    "test:unit": "node --experimental-vm-modules node_modules/jest/bin/jest.js --testPathIgnorePatterns=integration"
+    "test:unit": "node --experimental-vm-modules node_modules/jest/bin/jest.js --testPathIgnorePatterns=integration",
+    "postinstall": "node -e 'require(\"fs\").writeFileSync(\"node_modules/.prisma/client/package.json\", \"{\\\"type\\\":\\\"commonjs\\\"}\")'"
   },
   "prisma": {
     "seed": "node prisma/seed.js"
diff --git a/backend/src/index.js b/backend/src/index.js
index 1380abe..61d8567 100644
--- a/backend/src/index.js
+++ b/backend/src/index.js
@@ -7,7 +7,7 @@ import cookieParser from 'cookie-parser';
 import path from 'path';
 import { fileURLToPath } from 'url';
 import dotenv from 'dotenv';
-import { PrismaClient } from '@prisma/client';
+import { prisma } from './config/prisma.js';
 
 // Services
 import logger from './services/logger.js';
@@ -93,10 +93,6 @@ const server = createServer(app);
 // Initialize WebSocket
 const io = initializeSocket(server);
 
-const prisma = new PrismaClient({
-  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
-});
-
 export { prisma, io };
 
 // Trust proxy for rate limiting behind reverse proxy
diff --git a/backend/src/middleware/auth.js b/backend/src/middleware/auth.js
index 2b29a27..db38167 100644
--- a/backend/src/middleware/auth.js
+++ b/backend/src/middleware/auth.js
@@ -1,5 +1,5 @@
 import jwt from 'jsonwebtoken';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 export const authenticate = async (req, res, next) => {
   try {
diff --git a/backend/src/middleware/featureGate.js b/backend/src/middleware/featureGate.js
index c423649..dfc3f24 100644
--- a/backend/src/middleware/featureGate.js
+++ b/backend/src/middleware/featureGate.js
@@ -13,7 +13,7 @@
  *   router.use(checkUsageLimits); // Check usage limits
  */
 
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 import { PLAN_FEATURES, PLAN_LIMITS, PLAN_HIERARCHY, CORE_FEATURES } from '../config/plans.js';
 
diff --git a/backend/src/middleware/ownership.js b/backend/src/middleware/ownership.js
index 57b1b6c..fe8b4d1 100644
--- a/backend/src/middleware/ownership.js
+++ b/backend/src/middleware/ownership.js
@@ -17,7 +17,7 @@
  *   const record = await assertOwnership(prisma.invoice, id, companyId, 'Invoice');
  */
 
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 /**
  * Middleware factory.
diff --git a/backend/src/routes/agencyAdmin.js b/backend/src/routes/agencyAdmin.js
index 5eb6e98..8a3d19c 100644
--- a/backend/src/routes/agencyAdmin.js
+++ b/backend/src/routes/agencyAdmin.js
@@ -12,7 +12,7 @@ import { Router } from 'express';
 import { z } from 'zod';
 import crypto from 'crypto';
 import bcrypt from 'bcryptjs';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { 
   FEATURE_REGISTRY, 
diff --git a/backend/src/routes/auth.js b/backend/src/routes/auth.js
index 6461907..31579f1 100644
--- a/backend/src/routes/auth.js
+++ b/backend/src/routes/auth.js
@@ -3,7 +3,7 @@ import bcrypt from 'bcryptjs';
 import jwt from 'jsonwebtoken';
 import { z } from 'zod';
 import { v4 as uuidv4 } from 'uuid';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import emailService from '../services/email.js';
 import logger from '../services/logger.js';
diff --git a/backend/src/routes/bids.js b/backend/src/routes/bids.js
index 1787f91..71683ba 100644
--- a/backend/src/routes/bids.js
+++ b/backend/src/routes/bids.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/billing.js b/backend/src/routes/billing.js
index 3bea163..85531c0 100644
--- a/backend/src/routes/billing.js
+++ b/backend/src/routes/billing.js
@@ -13,13 +13,10 @@ import { Router } from 'express';
 import { authenticate } from '../middleware/auth.js';
 import { requireRole } from '../middleware/permissions.js';
 import billing from '../services/billing.js';
-import { prisma } from '../index.js';
-import Stripe from 'stripe';
+import { prisma } from '../config/prisma.js';
+import { stripe } from '../config/stripe.js';
 
 const router = Router();
-const stripe = process.env.STRIPE_SECRET_KEY 
-  ? new Stripe(process.env.STRIPE_SECRET_KEY)
-  : null;
 
 // Plan pricing in cents
 const PLAN_PRICING = {
diff --git a/backend/src/routes/booking.js b/backend/src/routes/booking.js
index e4c594d..251459a 100644
--- a/backend/src/routes/booking.js
+++ b/backend/src/routes/booking.js
@@ -1,7 +1,7 @@
 import { Router } from 'express';
 import rateLimit from 'express-rate-limit';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import booking from '../services/booking.js';
 
diff --git a/backend/src/routes/changeOrders.js b/backend/src/routes/changeOrders.js
index 11bc7a3..c54f82f 100644
--- a/backend/src/routes/changeOrders.js
+++ b/backend/src/routes/changeOrders.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/company.js b/backend/src/routes/company.js
index 0f6ff42..1c01d51 100644
--- a/backend/src/routes/company.js
+++ b/backend/src/routes/company.js
@@ -1,7 +1,7 @@
 import { Router } from 'express';
 import { z } from 'zod';
 import bcrypt from 'bcryptjs';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate, requireAdmin } from '../middleware/auth.js';
 
 const router = Router();
diff --git a/backend/src/routes/contacts.js b/backend/src/routes/contacts.js
index 55cad12..0e996ff 100644
--- a/backend/src/routes/contacts.js
+++ b/backend/src/routes/contacts.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { requirePermission } from '../middleware/permissions.js';
 import { withCompany } from '../middleware/ownership.js';
diff --git a/backend/src/routes/dailyLogs.js b/backend/src/routes/dailyLogs.js
index 574625e..196ac38 100644
--- a/backend/src/routes/dailyLogs.js
+++ b/backend/src/routes/dailyLogs.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/dashboard.js b/backend/src/routes/dashboard.js
index db0f26d..a2aa246 100644
--- a/backend/src/routes/dashboard.js
+++ b/backend/src/routes/dashboard.js
@@ -1,5 +1,5 @@
 import { Router } from 'express';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 
 const router = Router();
diff --git a/backend/src/routes/expenses.js b/backend/src/routes/expenses.js
index f227ac7..5ab1688 100644
--- a/backend/src/routes/expenses.js
+++ b/backend/src/routes/expenses.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/inspections.js b/backend/src/routes/inspections.js
index e3e02dc..7f20e98 100644
--- a/backend/src/routes/inspections.js
+++ b/backend/src/routes/inspections.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/integrations.js b/backend/src/routes/integrations.js
index 99178f2..b90318f 100644
--- a/backend/src/routes/integrations.js
+++ b/backend/src/routes/integrations.js
@@ -10,7 +10,7 @@
 
 import { Router } from 'express';
 import { authenticate } from '../middleware/auth.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import Stripe from 'stripe';
 import * as quickbooksService from '../services/quickbooks.js';
 
diff --git a/backend/src/routes/invoices.js b/backend/src/routes/invoices.js
index fd1838b..7e8064e 100644
--- a/backend/src/routes/invoices.js
+++ b/backend/src/routes/invoices.js
@@ -1,7 +1,7 @@
 import { Router } from 'express';
 import { nextDocumentNumber } from '../utils/documentNumbers.js';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { requirePermission } from '../middleware/permissions.js';
 import { withCompany } from '../middleware/ownership.js';
diff --git a/backend/src/routes/jobs.js b/backend/src/routes/jobs.js
index 946cd9f..7fe735a 100644
--- a/backend/src/routes/jobs.js
+++ b/backend/src/routes/jobs.js
@@ -1,7 +1,7 @@
 import { Router } from 'express';
 import { nextDocumentNumber } from '../utils/documentNumbers.js';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/maps.js b/backend/src/routes/maps.js
index a870f47..9cdacf7 100644
--- a/backend/src/routes/maps.js
+++ b/backend/src/routes/maps.js
@@ -2,7 +2,7 @@ import { Router } from 'express';
 import { authenticate } from '../middleware/auth.js';
 import { requirePermission, requireRole } from '../middleware/permissions.js';
 import geocoding from '../services/geocoding.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 const router = Router();
 router.use(authenticate);
diff --git a/backend/src/routes/portal.js b/backend/src/routes/portal.js
index cb4fc43..db9a28e 100644
--- a/backend/src/routes/portal.js
+++ b/backend/src/routes/portal.js
@@ -7,7 +7,7 @@
 
 import { Router } from 'express';
 import crypto from 'crypto';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { requirePermission } from '../middleware/permissions.js';
 import emailService from '../services/email.js';
diff --git a/backend/src/routes/projects.js b/backend/src/routes/projects.js
index 2513c16..01738df 100644
--- a/backend/src/routes/projects.js
+++ b/backend/src/routes/projects.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/punchLists.js b/backend/src/routes/punchLists.js
index 29928fe..b506a5b 100644
--- a/backend/src/routes/punchLists.js
+++ b/backend/src/routes/punchLists.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/quickbooks.js b/backend/src/routes/quickbooks.js
index 4942802..edd30c5 100644
--- a/backend/src/routes/quickbooks.js
+++ b/backend/src/routes/quickbooks.js
@@ -3,7 +3,7 @@ import { authenticate } from '../middleware/auth.js';
 import { requireRole } from '../middleware/permissions.js';
 import quickbooks from '../services/quickbooks.js';
 import audit from '../services/audit.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 const router = Router();
 
diff --git a/backend/src/routes/quotes.js b/backend/src/routes/quotes.js
index 8ddea17..a3771e6 100644
--- a/backend/src/routes/quotes.js
+++ b/backend/src/routes/quotes.js
@@ -1,7 +1,7 @@
 import { Router } from 'express';
 import { nextDocumentNumber } from '../utils/documentNumbers.js';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/recurring.js b/backend/src/routes/recurring.js
index 03405fa..7464e6e 100644
--- a/backend/src/routes/recurring.js
+++ b/backend/src/routes/recurring.js
@@ -5,7 +5,7 @@ import { withCompany } from '../middleware/ownership.js';
 
 import recurringService from '../services/recurring.js';
 import audit from '../services/audit.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 const router = Router();
 router.use(authenticate);
diff --git a/backend/src/routes/rfis.js b/backend/src/routes/rfis.js
index c41968a..1ea3de9 100644
--- a/backend/src/routes/rfis.js
+++ b/backend/src/routes/rfis.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/routes/routing.js b/backend/src/routes/routing.js
index 597fed4..e1e9e91 100644
--- a/backend/src/routes/routing.js
+++ b/backend/src/routes/routing.js
@@ -1,7 +1,7 @@
 import { Router } from 'express';
 import { authenticate } from '../middleware/auth.js';
 import routing from '../services/routing.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 const router = Router();
 
diff --git a/backend/src/routes/stripe.js b/backend/src/routes/stripe.js
index d9e46b9..d54d353 100644
--- a/backend/src/routes/stripe.js
+++ b/backend/src/routes/stripe.js
@@ -4,7 +4,7 @@ import { requirePermission } from '../middleware/permissions.js';
 import stripeService from '../services/stripe.js';
 import factoryStripe from '../services/factory/stripe.js';
 import audit from '../services/audit.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 const router = Router();
 
diff --git a/backend/src/routes/team.js b/backend/src/routes/team.js
index eab0647..56bff2d 100644
--- a/backend/src/routes/team.js
+++ b/backend/src/routes/team.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { requirePermission, requireRole } from '../middleware/permissions.js';
 
diff --git a/backend/src/routes/time.js b/backend/src/routes/time.js
index 740bd43..92bf349 100644
--- a/backend/src/routes/time.js
+++ b/backend/src/routes/time.js
@@ -1,6 +1,6 @@
 import { Router } from 'express';
 import { z } from 'zod';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 import { authenticate } from '../middleware/auth.js';
 import { withCompany } from '../middleware/ownership.js';
 
diff --git a/backend/src/services/agreements.js b/backend/src/services/agreements.js
index d1de43d..9be3303 100644
--- a/backend/src/services/agreements.js
+++ b/backend/src/services/agreements.js
@@ -10,7 +10,7 @@
  */
 
 import Stripe from 'stripe';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 const stripe = process.env.STRIPE_SECRET_KEY ? new Stripe(process.env.STRIPE_SECRET_KEY) : null;
 
diff --git a/backend/src/services/audit.js b/backend/src/services/audit.js
index c45b5d9..22acc19 100644
--- a/backend/src/services/audit.js
+++ b/backend/src/services/audit.js
@@ -5,7 +5,7 @@
 
 
 
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export const ACTIONS = {
   CREATE: 'create',
   UPDATE: 'update',
diff --git a/backend/src/services/billing.js b/backend/src/services/billing.js
index 8e5da76..002fbf8 100644
--- a/backend/src/services/billing.js
+++ b/backend/src/services/billing.js
@@ -11,7 +11,7 @@
 
 import { stripe } from '../config/stripe.js';
 import { SAAS_TIERS, SELF_HOSTED_PACKAGES, SELF_HOSTED_ADDONS, FEATURE_BUNDLES, calculateUserPrice } from '../config/pricing.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 const stripe = process.env.STRIPE_SECRET_KEY 
   ? new Stripe(process.env.STRIPE_SECRET_KEY)
diff --git a/backend/src/services/booking.js b/backend/src/services/booking.js
index 00dd3a5..214ff40 100644
--- a/backend/src/services/booking.js
+++ b/backend/src/services/booking.js
@@ -10,7 +10,7 @@
  */
 
 import emailService from './email.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 // ============================================
diff --git a/backend/src/services/bulk.js b/backend/src/services/bulk.js
index 75afc79..1ff9506 100644
--- a/backend/src/services/bulk.js
+++ b/backend/src/services/bulk.js
@@ -10,7 +10,7 @@
 // CONTACTS
 // ============================================
 
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function bulkUpdateContacts(companyId, contactIds, updates) {
   const result = await prisma.contact.updateMany({
     where: {
diff --git a/backend/src/services/calltracking.js b/backend/src/services/calltracking.js
index 1d534f4..e20589a 100644
--- a/backend/src/services/calltracking.js
+++ b/backend/src/services/calltracking.js
@@ -11,7 +11,7 @@
 
 
 // Provider configuration
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const PROVIDER = process.env.CALL_TRACKING_PROVIDER; // callrail, ctm, twilio
 const CALLRAIL_API_KEY = process.env.CALLRAIL_API_KEY;
 const CALLRAIL_ACCOUNT_ID = process.env.CALLRAIL_ACCOUNT_ID;
diff --git a/backend/src/services/comments.js b/backend/src/services/comments.js
index 3693765..c86531c 100644
--- a/backend/src/services/comments.js
+++ b/backend/src/services/comments.js
@@ -18,7 +18,7 @@
 /**
  * Add a comment to any entity
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function addComment({
   companyId,
   userId,
diff --git a/backend/src/services/customForms.js b/backend/src/services/customForms.js
index 1743829..36b773f 100644
--- a/backend/src/services/customForms.js
+++ b/backend/src/services/customForms.js
@@ -11,7 +11,7 @@
 
 
 // Field types
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export const FIELD_TYPES = {
   TEXT: 'text',
   TEXTAREA: 'textarea',
diff --git a/backend/src/services/drawSchedules.js b/backend/src/services/drawSchedules.js
index c95a053..d69d4ec 100644
--- a/backend/src/services/drawSchedules.js
+++ b/backend/src/services/drawSchedules.js
@@ -17,7 +17,7 @@
 /**
  * Create Schedule of Values for a project
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function createScheduleOfValues(companyId, projectId, data) {
   const project = await prisma.project.findFirst({
     where: { id: projectId, companyId },
diff --git a/backend/src/services/equipment.js b/backend/src/services/equipment.js
index ef7cfd1..abc1f84 100644
--- a/backend/src/services/equipment.js
+++ b/backend/src/services/equipment.js
@@ -18,7 +18,7 @@
 /**
  * Create equipment type (template)
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function createEquipmentType(companyId, data) {
   return prisma.equipmentType.create({
     data: {
diff --git a/backend/src/services/factory/stripe.js b/backend/src/services/factory/stripe.js
index dba9b62..ca90c7d 100644
--- a/backend/src/services/factory/stripe.js
+++ b/backend/src/services/factory/stripe.js
@@ -13,10 +13,6 @@
 
 import { stripe } from '../../config/stripe.js';
 
-const stripe = process.env.STRIPE_SECRET_KEY
-  ? new Stripe(process.env.STRIPE_SECRET_KEY)
-  : null;
-
 const FRONTEND_URL = process.env.FRONTEND_URL || 'http://localhost:5173';
 
 // ============================================
diff --git a/backend/src/services/fleet.js b/backend/src/services/fleet.js
index 3dfa77a..85fe324 100644
--- a/backend/src/services/fleet.js
+++ b/backend/src/services/fleet.js
@@ -19,7 +19,7 @@
 /**
  * Create vehicle
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function createVehicle(companyId, data) {
   return prisma.vehicle.create({
     data: {
diff --git a/backend/src/services/geocoding.js b/backend/src/services/geocoding.js
index 54cb399..ce77032 100644
--- a/backend/src/services/geocoding.js
+++ b/backend/src/services/geocoding.js
@@ -8,7 +8,7 @@
 
 
 // Simple in-memory cache (in production, use Redis)
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const cache = new Map();
 const CACHE_TTL = 7 * 24 * 60 * 60 * 1000; // 7 days
 
diff --git a/backend/src/services/geofencing.js b/backend/src/services/geofencing.js
index 86da860..ca8c817 100644
--- a/backend/src/services/geofencing.js
+++ b/backend/src/services/geofencing.js
@@ -11,7 +11,7 @@
 
 
 // Default geofence radius in meters
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const DEFAULT_RADIUS = 100;
 
 // ============================================
diff --git a/backend/src/services/import.js b/backend/src/services/import.js
index 050d38c..e56ede9 100644
--- a/backend/src/services/import.js
+++ b/backend/src/services/import.js
@@ -10,7 +10,7 @@
  */
 
 import { parse } from 'csv-parse/sync';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 /**
diff --git a/backend/src/services/inventory.js b/backend/src/services/inventory.js
index cc220b1..99c0626 100644
--- a/backend/src/services/inventory.js
+++ b/backend/src/services/inventory.js
@@ -16,7 +16,7 @@
  */
 
 import emailService from './email.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 // ============================================
diff --git a/backend/src/services/jobCosting.js b/backend/src/services/jobCosting.js
index 9e4aa54..c25acb1 100644
--- a/backend/src/services/jobCosting.js
+++ b/backend/src/services/jobCosting.js
@@ -13,7 +13,7 @@
 /**
  * Get detailed job cost breakdown
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function getJobCostAnalysis(jobId, companyId) {
   const job = await prisma.job.findFirst({
     where: { id: jobId, companyId },
diff --git a/backend/src/services/lienWaivers.js b/backend/src/services/lienWaivers.js
index bfd55a3..8272676 100644
--- a/backend/src/services/lienWaivers.js
+++ b/backend/src/services/lienWaivers.js
@@ -11,7 +11,7 @@
 
 
 // Waiver types
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export const WAIVER_TYPES = {
   CONDITIONAL_PARTIAL: 'conditional_partial',     // Conditional upon payment clearing - partial payment
   UNCONDITIONAL_PARTIAL: 'unconditional_partial', // Payment received - partial payment
diff --git a/backend/src/services/marketing.js b/backend/src/services/marketing.js
index 41b1de6..74f6a60 100644
--- a/backend/src/services/marketing.js
+++ b/backend/src/services/marketing.js
@@ -11,7 +11,7 @@
  */
 
 import sgMail from '@sendgrid/mail';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 // Initialize SendGrid
diff --git a/backend/src/services/photos.js b/backend/src/services/photos.js
index 6041770..8cfd912 100644
--- a/backend/src/services/photos.js
+++ b/backend/src/services/photos.js
@@ -12,7 +12,7 @@ import path from 'path';
 import fs from 'fs/promises';
 import sharp from 'sharp';
 import { v4 as uuid } from 'uuid';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 const UPLOAD_DIR = process.env.UPLOAD_DIR || './uploads';
diff --git a/backend/src/services/pricebook.js b/backend/src/services/pricebook.js
index 2e60caa..a66ad7f 100644
--- a/backend/src/services/pricebook.js
+++ b/backend/src/services/pricebook.js
@@ -19,7 +19,7 @@
 /**
  * Create category
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function createCategory(companyId, data) {
   const sortOrder = await getNextSortOrder(companyId, data.parentId);
   
diff --git a/backend/src/services/push.js b/backend/src/services/push.js
index 7384494..adbde1a 100644
--- a/backend/src/services/push.js
+++ b/backend/src/services/push.js
@@ -6,7 +6,7 @@
  */
 
 import webpush from 'web-push';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 // Configure VAPID keys
diff --git a/backend/src/services/quickbooks.js b/backend/src/services/quickbooks.js
index 21370dd..4550b10 100644
--- a/backend/src/services/quickbooks.js
+++ b/backend/src/services/quickbooks.js
@@ -11,7 +11,7 @@
 
 
 // QuickBooks API URLs
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const QBO_AUTH_URL = 'https://appcenter.intuit.com/connect/oauth2';
 const QBO_TOKEN_URL = 'https://oauth.platform.intuit.com/oauth2/v1/tokens/bearer';
 const QBO_API_BASE = 'https://quickbooks.api.intuit.com/v3/company';
diff --git a/backend/src/services/recurring.js b/backend/src/services/recurring.js
index 5d037f0..2655322 100644
--- a/backend/src/services/recurring.js
+++ b/backend/src/services/recurring.js
@@ -5,7 +5,7 @@
  */
 
 import emailService from './email.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 /**
diff --git a/backend/src/services/reporting.js b/backend/src/services/reporting.js
index 0f41578..315d8c9 100644
--- a/backend/src/services/reporting.js
+++ b/backend/src/services/reporting.js
@@ -18,7 +18,7 @@
 /**
  * Get revenue overview
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function getRevenueOverview(companyId, { startDate, endDate }) {
   const dateFilter = buildDateFilter(startDate, endDate);
 
diff --git a/backend/src/services/reviews.js b/backend/src/services/reviews.js
index a77eded..060f357 100644
--- a/backend/src/services/reviews.js
+++ b/backend/src/services/reviews.js
@@ -10,7 +10,7 @@
  */
 
 import email from './email.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 // Twilio for SMS (optional)
diff --git a/backend/src/services/routing.js b/backend/src/services/routing.js
index d89b460..ebdf2a4 100644
--- a/backend/src/services/routing.js
+++ b/backend/src/services/routing.js
@@ -10,7 +10,7 @@
  */
 
 // Using OSRM (free) or Google Maps Directions API
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const OSRM_URL = process.env.OSRM_URL || 'https://router.project-osrm.org';
 const GOOGLE_MAPS_KEY = process.env.GOOGLE_MAPS_API_KEY;
 
diff --git a/backend/src/services/scheduling.js b/backend/src/services/scheduling.js
index 39b1e54..dc5d750 100644
--- a/backend/src/services/scheduling.js
+++ b/backend/src/services/scheduling.js
@@ -12,7 +12,7 @@
 
 
 // Dependency types
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const DEPENDENCY_TYPES = {
   FS: 'finish_to_start',  // Task B starts when Task A finishes (most common)
   SS: 'start_to_start',   // Task B starts when Task A starts
diff --git a/backend/src/services/search.js b/backend/src/services/search.js
index 2c6fc70..6f6e915 100644
--- a/backend/src/services/search.js
+++ b/backend/src/services/search.js
@@ -10,7 +10,7 @@
 /**
  * Search all entities
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function globalSearch(companyId, query, options = {}) {
   const { limit = 20, types = null } = options;
   
diff --git a/backend/src/services/selections.js b/backend/src/services/selections.js
index 39dc6ea..effe418 100644
--- a/backend/src/services/selections.js
+++ b/backend/src/services/selections.js
@@ -19,7 +19,7 @@
 /**
  * Create selection category template
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function createCategory(companyId, data) {
   return prisma.selectionCategory.create({
     data: {
diff --git a/backend/src/services/sms.js b/backend/src/services/sms.js
index 7b695b3..1184b9b 100644
--- a/backend/src/services/sms.js
+++ b/backend/src/services/sms.js
@@ -10,7 +10,7 @@
  */
 
 import twilio from 'twilio';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 // Initialize Twilio client
diff --git a/backend/src/services/stripe.js b/backend/src/services/stripe.js
index d63887a..0d9d4ce 100644
--- a/backend/src/services/stripe.js
+++ b/backend/src/services/stripe.js
@@ -10,14 +10,7 @@
 
 import { stripe } from '../config/stripe.js';
 import emailService from './email.js';
-import { prisma } from '../index.js';
-
-
-const stripe = process.env.STRIPE_SECRET_KEY 
-  ? new Stripe(process.env.STRIPE_SECRET_KEY, {
-      apiVersion: '2023-10-16',
-    })
-  : null;
+import { prisma } from '../config/prisma.js';
 
 // ============================================
 // CUSTOMER MANAGEMENT
diff --git a/backend/src/services/takeoffs.js b/backend/src/services/takeoffs.js
index 50fb176..7ab6bc3 100644
--- a/backend/src/services/takeoffs.js
+++ b/backend/src/services/takeoffs.js
@@ -13,7 +13,7 @@
 
 
 // Measurement types
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const MEASUREMENT_TYPES = {
   AREA: 'area',           // Square feet
   LINEAR: 'linear',       // Linear feet
diff --git a/backend/src/services/tasks.js b/backend/src/services/tasks.js
index ecb9afc..db25374 100644
--- a/backend/src/services/tasks.js
+++ b/backend/src/services/tasks.js
@@ -14,7 +14,7 @@
 /**
  * Create a task
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function createTask({
   companyId,
   createdById,
diff --git a/backend/src/services/timeTracking.js b/backend/src/services/timeTracking.js
index 02d9db7..3237491 100644
--- a/backend/src/services/timeTracking.js
+++ b/backend/src/services/timeTracking.js
@@ -14,7 +14,7 @@
 /**
  * Start a time entry (clock in)
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function clockIn({ userId, companyId, jobId, projectId, notes }) {
   // Check for existing active entry
   const activeEntry = await prisma.timeEntry.findFirst({
diff --git a/backend/src/services/warranties.js b/backend/src/services/warranties.js
index 6f65e2a..e207bde 100644
--- a/backend/src/services/warranties.js
+++ b/backend/src/services/warranties.js
@@ -18,7 +18,7 @@
 /**
  * Create warranty template
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 export async function createWarrantyTemplate(companyId, data) {
   return prisma.warrantyTemplate.create({
     data: {
diff --git a/backend/src/services/weather.js b/backend/src/services/weather.js
index e08b63d..65d9f1f 100644
--- a/backend/src/services/weather.js
+++ b/backend/src/services/weather.js
@@ -7,7 +7,7 @@
 
 
 
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 const OPENWEATHER_API_KEY = process.env.OPENWEATHER_API_KEY;
 const OPENWEATHER_BASE_URL = 'https://api.openweathermap.org/data/2.5';
 
diff --git a/backend/src/services/wisetack.js b/backend/src/services/wisetack.js
index 81da8c8..feeff32 100644
--- a/backend/src/services/wisetack.js
+++ b/backend/src/services/wisetack.js
@@ -12,7 +12,7 @@
 
 import crypto from 'crypto';
 import emailService from './email.js';
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 
 const WISETACK_API_URL = process.env.WISETACK_API_URL || 'https://api.wisetack.com/v1';
diff --git a/backend/src/utils/documentNumbers.js b/backend/src/utils/documentNumbers.js
index 41b0671..ceef2b1 100644
--- a/backend/src/utils/documentNumbers.js
+++ b/backend/src/utils/documentNumbers.js
@@ -8,7 +8,7 @@
  * both write INV-00042. This uses SELECT FOR UPDATE semantics via
  * Prisma's $transaction to serialize the read + increment.
  */
-import { prisma } from '../index.js';
+import { prisma } from '../config/prisma.js';
 
 /**
  * Get next document number for a given prefix + company.
diff --git a/backend/src/config/prisma.js b/backend/src/config/prisma.js
new file mode 100644
index 0000000..8ff2a9f
--- /dev/null
+++ b/backend/src/config/prisma.js
@@ -0,0 +1,14 @@
+/**
+ * Shared Prisma Client
+ *
+ * Extracted from index.js to break circular import chains.
+ * All services and routes should import prisma from here,
+ * NOT from '../index.js'.
+ */
+import { PrismaClient } from '@prisma/client';
+
+export const prisma = new PrismaClient({
+  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
+});
+
+export default prisma;
